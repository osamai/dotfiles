#!/bin/sh

input=""
output="%(title)s.%(ext)s"
format="22/best[ext=mp4]/best"

while [ $# -ne 0 ]; do
  case "$1" in
  -pl | --playlist)
    output="%(playlist_title)s/%(title)s.%(ext)s"
    ;;

  -pls | --playlist-sorted)
    output="%(playlist_title)s/%(playlist_index)s. %(title)s.%(ext)s"
    ;;

  -a | --audio | --no-vid | --no-video)
    format="bestaudio[ext=m4a]/bestaudio[ext=mp3]/bestaudio"
    ;;

  -v | --vid | --video | --no-audio)
    format="bestvideo[ext=mp4]/bestvideo"
    ;;

  *)
    if [ "$1" ]; then
      [ "$input" = "" ] && input="$1" || input="$input $1"
    fi
    ;;
  esac

  shift
done

youtube-dl -i -o "$output" -f "$format" "$input"
